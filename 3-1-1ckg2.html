<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>제망매가 해설 및 문제</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            touch-action: manipulation; /* 더블 탭 확대 방지 */
        }
        .btn-primary {
            background-color: #3b82f6;
            color: white;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #2563eb;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .exam-section h4 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #6b7280; /* Gray color for this unit */
            color: #374151;
        }
        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background-color: #ffffff;
            transition: background-color 0.2s, border-color 0.2s;
            cursor: pointer;
        }
        .quiz-option:hover {
            background-color: #f3f4f6;
            border-color: #9ca3af;
        }
        .quiz-option.selected {
            background-color: #e5e7eb;
            border-color: #6b7280;
            font-weight: 600;
        }
        .quiz-result {
            display: none;
            padding: 1rem;
            margin-top: 0.75rem;
            border-radius: 0.5rem;
        }
        .quiz-result.correct {
            background-color: #ecfdf5;
            border: 1px solid #34d399;
        }
        .quiz-result.incorrect {
            background-color: #fff1f2;
            border: 1px solid #f87171;
        }
        /* --- Penguin Game Styles --- */
        .game-container {
            width: 100%;
            height: 600px; /* Adjusted for embedding */
            background: linear-gradient(to bottom, #87CEEB 0%, #B0E0E6 70%, #FFFFFF 100%);
            overflow: hidden;
            position: relative;
            border-radius: 1rem;
            margin-top: 1rem;
        }
        .game-container canvas {
            background-color: transparent;
            width: 100%;
            height: 100%;
        }
        .ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .glassmorphism {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        #touch-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 150px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 5px;
            opacity: 0.6;
        }
        .touch-btn {
            background-color: rgba(0,0,0,0.5);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 24px;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        #touchUp { grid-area: 1 / 2 / 2 / 3; }
        #touchLeft { grid-area: 2 / 1 / 3 / 2; }
        #touchRight { grid-area: 2 / 3 / 3 / 4; }
        #touchDown { grid-area: 3 / 2 / 4 / 3; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl fade-in">
        <button class="btn-primary mb-6 px-4 py-2 rounded-lg" onclick="alert('목차 페이지로 돌아갑니다. (별도 파일)')">← 목차로 돌아가기</button>
        <h2 class="text-3xl font-bold mb-2 text-center text-gray-800">3-1-1. 시가 세 편</h2>
        <h3 class="text-xl font-semibold mb-6 text-center text-gray-600">시험 대비 완전 정복: <제망매가></h3>
        
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-md space-y-10">
            <!-- 1. 제재 개관 -->
            <section class="exam-section">
                <h4>1. 제재 개관</h4>
                <div class="p-4 bg-gray-50 rounded-lg text-gray-700 leading-relaxed space-y-2">
                    <p><strong class="text-gray-800">■ 작자:</strong> 월명사</p>
                    <p><strong class="text-gray-800">■ 갈래:</strong> 10구체 향가</p>
                    <p><strong class="text-gray-800">■ 성격:</strong> 서정적, 애상적, 추모적, 비유적, 불교적</p>
                    <p><strong class="text-gray-800">■ 제재:</strong> 죽은 누이의 죽음</p>
                    <p><strong class="text-gray-800">■ 주제:</strong> 죽은 누이에 대한 추모, 혈육의 죽음으로 인한 슬픔과 극복 의지</p>
                    <p><strong class="text-gray-800">■ 특징:</strong></p>
                    <ul class="list-disc list-inside ml-4">
                        <li>시적 상황을 자연 현상에 비유하여 형상화함.</li>
                        <li>10구체 향가의 정제된 형식미와 고도의 서정성이 두드러짐.</li>
                        <li>불교적 내세 사상과 윤회 사상을 기반으로 하여 사별의 슬픔을 종교적으로 승화함.</li>
                    </ul>
                </div>
            </section>
            
            <!-- 2. 작품 해설 및 표현법 -->
            <section class="exam-section">
                <h4>2. 작품 해설 및 표현법</h4>
                <div class="space-y-6 text-sm sm:text-base">
                    <p>이 작품은 신라의 승려 월명사가 죽은 누이를 추모하며 지은 10구체 향가입니다. 혈육의 죽음을 자연 현상에 비유하여 형상화하고, 그 슬픔을 종교적으로 승화하는 과정을 담고 있습니다. 향가 중에서도 문학성과 서정성이 뛰어난 작품으로 평가받습니다.</p>
                    <div class="p-4 bg-gray-100 rounded-md border-l-4 border-gray-400">
                        <p class="font-bold text-lg text-gray-800">기(起): 1~4행 - 누이의 죽음에 대한 안타까움</p>
                        <ul class="mt-2 ml-4 list-disc list-outside space-y-2 text-gray-700">
                            <li>"생사 길은 / 예 있으매 머뭇거리고": 삶과 죽음의 길은 이승에 있어 화자가 머뭇거립니다.</li>
                            <li>"나는 간다는 말도 / 못다 이르고 어찌 갑니까.": 화자는 죽은 누이가 '간다는 말' 한마디 없이 갑작스럽게 떠난 것에 대해 안타까워합니다.</li>
                        </ul>
                    </div>
                    <div class="p-4 bg-gray-100 rounded-md border-l-4 border-gray-400">
                        <p class="font-bold text-lg text-gray-800">서(敍): 5~8행 - 혈육의 죽음에서 느끼는 삶의 무상함</p>
                        <ul class="mt-2 ml-4 list-disc list-outside space-y-2 text-gray-700">
                            <li>"어느 가을 이른 바람에 / 이에 저에 떨어질 잎처럼": '이른 바람'은 누이의 요절(젊은 나이에 죽음)을, '떨어질 잎'은 죽은 누이를 비유합니다. 누이의 죽음을 자연 현상에 빗대어 시각적으로 표현하고 있습니다.</li>
                            <li>"한 가지에 나고 / 가는 곳 모르온저.": '한 가지'는 같은 부모에게서 태어난 혈육을 의미합니다. 같은 부모에게서 태어났지만 죽음 후에는 어디로 가는지 알 수 없는 삶의 무상감을 드러냅니다.</li>
                        </ul>
                    </div>
                    <div class="p-4 bg-gray-100 rounded-md border-l-4 border-gray-400">
                        <p class="font-bold text-lg text-gray-800">결(結): 9~10행 - 종교적 믿음을 통한 슬픔의 극복</p>
                        <ul class="mt-2 ml-4 list-disc list-outside space-y-2 text-gray-700">
                            <li>"아아, 미타찰에서 만날 나": 낙구의 첫머리 감탄사 '아아'를 통해 시상이 전환됩니다. '미타찰(彌陀刹)'은 불교적 내세인 극락 세계를 의미합니다.</li>
                            <li>"도 닦아 기다리겠노라.": 화자는 누이와의 재회를 기약하며 종교적 믿음으로 슬픔을 극복하려는 의지를 다집니다.</li>
                        </ul>
                    </div>
                    <div class="p-4 bg-gray-100 rounded-md border-l-4 border-gray-400">
                        <p class="font-bold text-lg text-gray-800">주요 표현법</p>
                        <ul class="mt-2 ml-4 list-disc list-outside space-y-2 text-gray-700">
                            <li><strong>비유법:</strong> 누이의 요절을 '이른 바람'에, 죽은 누이를 '떨어질 잎'에, 혈육 관계를 '한 가지'에 빗대어 표현하여 시적 상황을 구체화합니다.</li>
                            <li><strong>상징법:</strong> '미타찰'은 불교적 내세인 극락 세계를 상징하여 화자의 종교적 믿음을 드러냅니다.</li>
                            <li><strong>시각적 심상:</strong> '떨어질 잎'이라는 시각적 이미지를 통해 누이의 죽음을 형상화하여 애상적 분위기를 조성합니다.</li>
                            <li><strong>영탄법:</strong> 낙구의 감탄사 '아아'를 사용하여 슬픔을 극복하려는 화자의 의지를 강조하며 시상을 전환합니다.</li>
                            <li><strong>대유법:</strong> '한 가지'는 나무의 가지를 통해 그 나무에서 나온 모든 잎(혈육)을 대표하여 나타냅니다.</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- 3. 게임으로 내용 이해하기 -->
            <section class="exam-section">
                <h4>3. 게임으로 내용 이해하기</h4>
                <div id="gameContainer" class="game-container shadow-2xl">
                    <!-- 게임 UI -->
                    <div id="ui" class="absolute top-0 left-0 w-full p-4 text-white z-10">
                        <div class="flex justify-between items-center">
                            <h1 class="text-xl font-bold">제망매가 퀴즈</h1>
                            <div class="text-lg font-bold bg-white/30 px-4 py-1 rounded-full">점수: <span id="score">0</span></div>
                        </div>
                        <div id="questionBox" class="mt-4 text-center bg-black/30 p-4 rounded-lg text-lg min-h-[80px] flex items-center justify-center">
                            <p id="questionText"></p>
                        </div>
                    </div>

                    <!-- 게임 캔버스 -->
                    <canvas id="gameCanvas"></canvas>

                    <!-- 게임 오버레이 (시작, 종료 화면) -->
                    <div id="startScreen" class="ui-overlay z-20 glassmorphism mx-4">
                        <div class="text-center p-8">
                            <svg viewBox="0 0 200 200" class="w-24 h-24 mx-auto mb-4">
                                <path fill="#333" d="M100,20 C60,20 30,50 30,90 C30,130 60,180 100,180 C140,180 170,130 170,90 C170,50 140,20 100,20 Z"></path>
                                <path fill="#FFF" d="M100,60 C70,60 50,80 50,110 C50,140 70,160 100,160 C130,160 150,140 150,110 C150,80 130,60 100,60 Z"></path>
                                <circle fill="#333" cx="80" cy="95" r="8"></circle>
                                <circle fill="#333" cx="120" cy="95" r="8"></circle>
                                <path fill="#FFA500" d="M100,110 L90,125 L110,125 Z"></path>
                                <path fill="#FFA500" d="M40,140 a 20,20 0 0,0 0,10 a 30,20 0 0,0 20,-10 Z" transform="rotate(-20, 40, 140)"></path>
                                <path fill="#FFA500" d="M160,140 a 20,20 0 0,1 0,10 a 30,20 0 0,1 -20,-10 Z" transform="rotate(20, 160, 140)"></path>
                            </svg>
                            <h2 class="text-4xl font-bold text-gray-800 mb-2">제망매가 펭귄 퀴즈</h2>
                            <p class="text-gray-700 mb-6">펭귄을 움직여 정답 표지판으로 달려가세요!<br>(키보드 ↑↓←→ 또는 화면 터치)</p>
                            <button id="startButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-xl transition-transform transform hover:scale-105">게임 시작</button>
                        </div>
                    </div>

                    <div id="gameOverScreen" class="ui-overlay z-20 glassmorphism mx-4 hidden">
                        <div class="text-center p-8">
                            <h2 class="text-4xl font-bold text-gray-800 mb-2">게임 종료!</h2>
                            <p class="text-2xl text-gray-700 mb-4">최종 점수: <span id="finalScore" class="font-bold"></span>점</p>
                            <p id="gameOverMessage" class="text-gray-600 mb-6">참 잘했어요!</p>
                            <button id="restartButton" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full text-xl transition-transform transform hover:scale-105">다시하기</button>
                        </div>
                    </div>
                    
                    <!-- 터치 컨트롤 -->
                    <div id="touch-controls" class="hidden">
                        <div id="touchUp" class="touch-btn">▲</div>
                        <div id="touchLeft" class="touch-btn">◀</div>
                        <div id="touchRight" class="touch-btn">▶</div>
                        <div id="touchDown" class="touch-btn">▼</div>
                    </div>
                </div>
            </section>

            <!-- 4. 실전 대비 내용 확인 문제 (5지 선다형) -->
            <section class="exam-section">
                <h4>4. 실전 대비 내용 확인 문제</h4>
                <div id="quiz-container" class="space-y-8">
                    <!-- 문제가 여기에 동적으로 추가됩니다. -->
                </div>
                <button id="grade-button" class="mt-8 w-full btn-primary py-3 rounded-lg text-lg font-bold" onclick="gradeQuiz()">채점하기</button>
                <div id="quiz-total-result" class="hidden mt-6 p-4 text-center rounded-lg"></div>
            </section>
        </div>
    </div>

    <script>
        // 기존 퀴즈 스크립트
        const quizData = [
            { question: "이 작품에 대한 설명으로 가장 적절한 것은?", options: ["시적 화자는 누이의 죽음에 대해 분노를 표출하고 있다.", "현실의 고통을 외면하고 자연에 귀의하려는 태도를 보인다.", "삶과 죽음의 문제를 종교적 관점에서 다루고 있다.", "4구체 향가의 정제된 형식미를 보여준다.", "시간적 배경은 가을이며, 화자는 누이의 죽음을 덤덤하게 받아들인다."], answer: 2, explanation: "작품은 누이의 죽음이라는 비극적 상황을 불교적 내세 사상과 윤회 사상을 통해 극복하려는 태도를 보여주고 있습니다. 이는 삶과 죽음의 문제를 종교적으로 다룬 것입니다." },
            { question: "작품의 5~6행 '어느 가을 이른 바람에 / 이에 저에 떨어질 잎처럼'의 비유적 의미로 가장 적절한 것은?", options: ["삶의 무상함과 허망함", "누이의 요절과 죽음", "인생의 덧없음과 비관", "자연의 순리와 섭리", "세상과의 단절과 고립"], answer: 1, explanation: "'이른 바람'은 계절에 맞지 않게 일찍 불어오는 바람으로 누이의 '이른 죽음'을 비유하며, '떨어질 잎'은 죽은 누이의 모습을 비유한 것입니다." },
            { question: "이 작품의 낙구(9~10행)가 지닌 기능으로 가장 적절한 것은?", options: ["시적 상황을 요약하여 전달한다.", "자연물의 이미지를 통해 정서를 심화한다.", "현실의 비극성을 강조하고 절망감을 표현한다.", "감탄사를 통해 시상을 전환하고 화자의 의지를 드러낸다.", "누이에 대한 그리움을 해학적으로 표현한다."], answer: 3, explanation: "9행의 감탄사 '아아'는 누이의 죽음으로 인한 슬픔과 무상감에서 벗어나 내세에서의 재회를 다짐하는 의지적 태도로 시상을 전환하는 역할을 합니다." },
            { question: "이 작품에 나타난 시적 화자의 태도 변화로 가장 적절한 것은?", options: ["현실의 고통에 좌절 → 자연 속에서 평안을 찾음", "삶의 무상함에 절망 → 종교적 믿음으로 극복", "누이의 죽음에 대한 분노 → 체념적인 태도로 수용", "세상과의 단절 → 공동체와의 유대감을 회복", "운명에 대한 순응 → 운명에 대한 반발과 저항"], answer: 1, explanation: "화자는 누이의 죽음을 겪으며 삶의 무상함에 절망하지만, 마지막에 '도 닦아 기다리겠노라'고 말하며 불교적 믿음으로 슬픔을 극복하려는 의지적 태도를 보여줍니다." },
            { question: "이 작품의 '한 가지'가 의미하는 바와 가장 유사한 것은?", options: ["서로 다른 목표를 추구하는 두 사람", "다른 지역에서 온 두 사람의 만남", "같은 직장에서 일하는 두 동료", "같은 부모에게서 태어난 형제", "사상적 갈등을 겪는 두 집단"], answer: 3, explanation: "'한 가지에 나고'는 같은 나무의 가지에서 나온 잎처럼, 같은 부모에게서 태어난 혈육 관계를 의미합니다. 즉, 같은 부모에게서 태어난 형제와 유사한 의미를 가집니다." },
            { question: "이 작품의 주제 의식에 대한 설명으로 가장 적절한 것은?", options: ["죽음은 삶의 끝이 아니라 새로운 시작임을 보여준다.", "인간은 자연의 섭리에 순응하며 살아야 한다.", "혈육의 죽음으로 인한 슬픔은 인간이라면 누구나 겪는 보편적 감정이다.", "사랑하는 사람과의 이별을 통해 자아를 성찰하는 계기를 얻는다.", "소중한 사람과의 사별에서 오는 슬픔을 종교적 믿음을 통해 이겨내려는 의지를 보여준다."], answer: 4, explanation: "작품의 결말에서 '도 닦아 기다리겠노라'는 구절을 통해, 누이와의 사별에서 오는 슬픔을 불교적 믿음으로 극복하려는 화자의 의지를 보여주고 있습니다." },
            { question: "<제망매가>에 대한 설명 중 '비유적 표현'에 해당하는 것은?", options: ["'생사 길은 예 있으매 머뭇거리고'", "'나는 간다는 말도 못다 이르고'", "'어느 가을 이른 바람에'", "'한 가지에 나고'", "'미타찰에서 만날 나'"], answer: 2, explanation: "'이른 바람'은 누이의 요절을 비유하고, '떨어질 잎'은 죽은 누이를 비유하는 표현입니다. 이는 죽음이라는 추상적인 개념을 구체적인 자연 현상에 빗대어 표현한 것입니다." },
            { question: "이 작품의 문학사적 의의로 적절하지 않은 것은?", options: ["향찰을 활용하여 우리말을 표기한 최초의 서정시이다.", "10구체 향가의 정제된 형식미를 보여준다.", "후대 시조의 3단 구성에 영향을 주었다고 볼 수 있다.", "불교적 세계관을 바탕으로 개인의 정서를 노래했다.", "자연의 풍요로움과 아름다움을 노래하여 후대 가사 문학에 영향을 주었다."], answer: 4, explanation: "이 작품은 누이의 죽음을 슬퍼하는 애상적 정서를 다루고 있으며, 자연의 풍요로움과는 거리가 멉니다. 자연 예찬은 주로 가사 문학이나 평시조에서 나타나는 주제입니다." },
            { question: "이 작품을 '추모적' 성격이라고 평가할 수 있는 이유로 가장 적절한 것은?", options: ["누이의 요절에 대한 비탄과 슬픔이 드러나기 때문에", "누이와의 재회를 기약하며 도를 닦겠다고 다짐하기 때문에", "누이의 갑작스러운 죽음에 대한 안타까움이 드러나기 때문에", "죽은 누이를 그리워하며 그녀의 명복을 빌기 때문에", "누이의 죽음을 자연의 순리로 받아들이기 때문에"], answer: 3, explanation: "'추모적(追慕的)'은 죽은 사람을 그리워하며 그를 기리는 것을 의미합니다. 이 작품은 죽은 누이를 그리워하고 불교적 내세에서 만나기를 바라며 도를 닦겠다고 다짐하는 점에서 추모적 성격이 두드러집니다." },
            { question: "이 작품의 시적 화자와 <십 년을 경영하여>의 시적 화자의 공통점으로 가장 적절한 것은?", options: ["둘 다 슬픔을 종교적으로 극복하려는 태도를 보인다.", "둘 다 자연물을 인격체로 대우하고 있다.", "둘 다 3단 구성의 형식을 통해 시상을 전개하고 있다.", "둘 다 현실의 고통을 해학적으로 풀어내고 있다.", "둘 다 속세의 욕망을 버리고 자연에 귀의하려는 태도를 보인다."], answer: 2, explanation: "두 작품 모두 3단 구성(기-서-결, 초장-중장-종장)을 통해 시상을 전개하고 있다는 공통점을 가집니다." },
            { question: "이 작품의 '생사 길은 예 있으매 머뭇거리고'에서 화자가 머뭇거리는 이유로 가장 적절한 것은?", options: ["누이의 갑작스러운 죽음 때문에 혼란스럽기 때문에", "삶과 죽음의 경계가 모호하다고 느끼기 때문에", "자신도 곧 죽을 것이라는 두려움 때문에", "아직 이승에 해야 할 일이 많이 남아있기 때문에", "누이의 무덤을 찾아가기 두렵기 때문에"], answer: 0, explanation: "'생사 길은 예 있으매'는 삶과 죽음의 경계가 이승에 존재한다는 것을 의미하며, '머뭇거리고'는 누이의 갑작스러운 죽음에 대한 화자의 당혹감과 혼란스러운 심정을 드러냅니다." },
            { question: "'한 가지에 나고 가는 곳 모르온저'에서 알 수 있는 화자의 정서로 가장 적절한 것은?", options: ["상실감과 허무함", "누이에 대한 그리움", "삶에 대한 희망", "운명에 대한 감사", "미래에 대한 기대"], answer: 0, explanation: "'한 가지에 나고'는 같은 부모에게서 태어난 혈육임을 의미하지만, '가는 곳 모르온저'는 누이의 죽음 후 가는 곳을 알 수 없어 느끼는 허무감과 삶의 덧없음을 드러냅니다." },
            { question: "이 작품에서 화자의 정서가 고조되는 부분은?", options: ["1~2행", "3~4행", "5~6행", "7~8행", "9~10행"], answer: 3, explanation: "5~8행은 '이른 바람에 떨어질 잎처럼' 누이의 죽음을 비유하고, '가는 곳 모르온저'라고 탄식하며 삶의 무상감을 드러내는 부분으로, 화자의 슬픔과 정서가 고조됩니다." },
            { question: "이 작품에 대한 다음 해석 중 불교적 세계관과 관련이 없는 것은?", options: ["'미타찰'에서 누이를 만나고자 한다.", "누이의 죽음을 전생의 업보로 생각한다.", "'도 닦아' 기다리겠다는 태도를 보인다.", "불교적 윤회 사상을 바탕으로 슬픔을 승화한다.", "누이의 명복을 빌기 위해 제사를 지낸다."], answer: 1, explanation: "작품에서 누이의 죽음을 전생의 업보로 생각한다는 내용은 없습니다. 이는 불교적 세계관의 일부이지만, 이 작품의 내용과 직접적인 관련은 없습니다." },
            { question: "<제망매가>에 대한 다음 설명 중 '추모적' 성격을 가장 잘 보여주는 시구는?", options: ["'나는 간다는 말도 못다 이르고'", "'어느 가을 이른 바람에'", "'한 가지에 나고'", "'아아, 미타찰에서 만날 나'", "'도 닦아 기다리겠노라.'"], answer: 3, explanation: "'미타찰'은 불교적 내세인 극락 세계를 의미하며, '만날 나'는 죽은 누이와의 재회를 기약하는 화자의 마음을 드러냅니다. 이는 죽은 사람을 그리워하며 그를 기리는 추모적 성격을 잘 보여줍니다." },
            { question: "다음 중 '비유적 표현'에 해당하는 시구가 아닌 것은?", options: ["이른 바람", "떨어질 잎", "한 가지", "미타찰", "생사 길"], answer: 4, explanation: "'생사 길'은 삶과 죽음의 길이라는 의미로, 비유적 표현이 아닌 직접적인 의미를 사용하고 있습니다. '이른 바람', '떨어질 잎', '한 가지'는 각각 누이의 요절, 죽은 누이, 혈육을 비유한 표현입니다." },
            { question: "다음 중 '시상 전환'에 대한 설명으로 가장 적절한 것은?", options: ["시의 주제를 처음부터 끝까지 일관되게 유지하는 것", "시의 내용과 분위기가 극적으로 바뀌는 것", "시의 화자가 바뀌는 것", "시의 배경이 바뀌는 것", "시의 형식과 운율이 바뀌는 것"], answer: 1, explanation: "시상 전환은 시의 내용이나 분위기가 한 시점부터 다른 방향으로 바뀌는 것을 의미합니다. 이 작품에서는 '아아'를 기점으로 슬픔에서 극복 의지로 전환됩니다." },
            { question: "'아아, 미타찰에서 만날 나 / 도 닦아 기다리겠노라'에서 화자의 태도를 가장 잘 보여주는 한자 성어는?", options: ["물아일체(物我一體)", "안분지족(安分知足)", "사자성어", "불교", "극복의지"], answer: 4, explanation: "낙구에서 화자는 누이와의 재회를 위해 '도 닦아 기다리겠노라'고 다짐하며, 이는 슬픔을 이겨내려는 '극복 의지'를 보여줍니다." },
            { question: "이 작품의 창작 배경 설화에서 월명사가 종이돈을 날려 보냈을 때 종이돈이 날아간 방향은?", options: ["동쪽", "서쪽", "남쪽", "북쪽", "하늘"], answer: 1, explanation: "배경 설화에 따르면, 월명사가 종이돈을 날려 보냈을 때 '세찬 바람이 불어 종이돈을 날려 서쪽으로 사라지게 하였다'고 되어 있습니다. 이는 불교에서 극락이 서쪽에 있다고 믿는 것과 관련이 있습니다." },
            { question: "다음 중 <제망매가>의 내용과 관련된 문학사적 의의는?", options: ["고려 가요의 시초가 되었다.", "후대 평시조의 주제에 영향을 주었다.", "한시 문학의 발전에 기여했다.", "우리말로 표기된 최초의 서정시 중 하나이다.", "노동요의 형식을 갖추고 있다."], answer: 3, explanation: "향가는 향찰을 활용하여 우리말을 표기한 최초의 서정시로, 우리나라 시가 문학의 발전 과정에서 중요한 위치를 차지합니다." }
        ];
        let userAnswers = {};
        function buildQuiz() {
            const quizContainer = document.getElementById('quiz-container');
            const optionChars = ['①', '②', '③', '④', '⑤'];
            let quizHTML = '';
            quizData.forEach((item, index) => {
                quizHTML += `<div class="quiz-item" id="q${index}">`;
                quizHTML += `<p class="font-semibold mb-3">${index + 1}. ${item.question}</p>`;
                quizHTML += `<div class="options-container space-y-2">`;
                item.options.forEach((option, optionIndex) => {
                    quizHTML += `<button class="quiz-option" onclick="selectAnswer(${index}, ${optionIndex})">${optionChars[optionIndex]} ${option}</button>`;
                });
                quizHTML += `</div>`;
                quizHTML += `<div class="quiz-result" id="result-${index}"></div>`;
                quizHTML += `</div>`;
            });
            quizContainer.innerHTML = quizHTML;
        }
        function selectAnswer(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;
            const options = document.querySelectorAll(`#q${questionIndex} .quiz-option`);
            options.forEach(option => option.classList.remove('selected'));
            options[optionIndex].classList.add('selected');
        }
        function gradeQuiz() {
            let score = 0;
            const optionChars = ['①', '②', '③', '④', '⑤'];
            quizData.forEach((item, index) => {
                const resultContainer = document.getElementById(`result-${index}`);
                const isCorrect = userAnswers[index] === item.answer;
                
                let resultHTML = '';
                if (userAnswers[index] === undefined) {
                    resultHTML = `<p class="font-bold text-yellow-600">답을 선택하지 않았습니다.</p>`;
                    resultContainer.className = 'quiz-result incorrect';
                } else if (isCorrect) {
                    score++;
                    resultHTML = `<p class="font-bold text-green-600">정답!</p>`;
                    resultContainer.className = 'quiz-result correct';
                } else {
                    resultHTML = `<p class="font-bold text-red-600">오답!</p><p class="mt-1">정답은 ${optionChars[item.answer]} 입니다.</p>`;
                    resultContainer.className = 'quiz-result incorrect';
                }
                
                resultHTML += `<hr class="my-2"><p class="font-semibold">해설</p><p class="text-gray-700 text-sm">${item.explanation}</p>`;
                resultContainer.innerHTML = resultHTML;
                resultContainer.style.display = 'block';
            });
            const totalScore = (score / quizData.length) * 100;
            const totalResultContainer = document.getElementById('quiz-total-result');
            totalResultContainer.innerHTML = `<h4 class="text-xl font-bold">총점: ${totalScore.toFixed(0)}점</h4><p>(${quizData.length}문제 중 ${score}문제 정답)</p>`;
            totalResultContainer.classList.remove('hidden');
            totalResultContainer.scrollIntoView({ behavior: 'smooth' });
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            buildQuiz();
        });
    </script>
<script>
    // --- DOM 요소 가져오기 ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const questionTextEl = document.getElementById('questionText');
    const startScreen = document.getElementById('startScreen');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const startButton = document.getElementById('startButton');
    const restartButton = document.getElementById('restartButton');
    const finalScoreEl = document.getElementById('finalScore');
    const gameContainer = document.getElementById('gameContainer');
    const touchUp = document.getElementById('touchUp');
    const touchDown = document.getElementById('touchDown');
    const touchLeft = document.getElementById('touchLeft');
    const touchRight = document.getElementById('touchRight');

    // --- 게임 데이터 ---
    const questions = [
        { question: "<제망매가>의 갈래는 무엇인가?", answers: [{ text: "10구체 향가", correct: true }, { text: "고려가요", correct: false }, { text: "가사", correct: false }] },
        { question: "<제망매가>의 작가는 누구인가?", answers: [{ text: "월명사", correct: true }, { text: "충담사", correct: false }, { text: "원효", correct: false }] },
        { question: "작품의 중심 주제로 가장 알맞은 것은?", answers: [{ text: "죽은 누이 추모", correct: true }, { text: "임과의 이별", correct: false }, { text: "자연 예찬", correct: false }] },
        { question: "작품의 성격으로 알맞지 않은 것은?", answers: [{ text: "해학적", correct: true }, { text: "애상적", correct: false }, { text: "불교적", correct: false }] },
        { question: "'이른 바람'이 상징하는 것은?", answers: [{ text: "누이의 요절", correct: true }, { text: "가을 날씨", correct: false }, { text: "인생의 시련", correct: false }] },
        { question: "'떨어질 잎'이 비유하는 대상은?", answers: [{ text: "죽은 누이", correct: true }, { text: "화자 자신", correct: false }, { text: "부모님", correct: false }] },
        { question: "'한 가지'는 화자와 누이가 어떤 관계임을 암시하는가?", answers: [{ text: "같은 부모", correct: true }, { text: "같은 스승", correct: false }, { text: "같은 마을", correct: false }] },
        { question: "누이의 죽음 앞에서 화자가 처음 느끼는 감정은?", answers: [{ text: "머뭇거림/안타까움", correct: true }, { text: "분노", correct: false }, { text: "체념", correct: false }] },
        { question: "화자가 삶의 무상함을 느끼게 하는 구절은?", answers: [{ text: "가는 곳 모르온저", correct: true }, { text: "나는 간다는 말도", correct: false }, { text: "도 닦아 기다리겠노라", correct: false }] },
        { question: "화자가 슬픔을 극복하려는 의지를 보이는 공간은 어디인가?", answers: [{ text: "미타찰", correct: true }, { text: "이승", correct: false }, { text: "저승길", correct: false }] },
        { question: "<제망매가>는 어떤 문자로 기록되었는가?", answers: [{ text: "향찰", correct: true }, { text: "한글", correct: false }, { text: "이두", correct: false }] },
        { question: "<제망매가>가 창작된 시대는?", answers: [{ text: "신라 시대", correct: true }, { text: "고려 시대", correct: false }, { text: "조선 시대", correct: false }] },
        { question: "10구체 향가의 3단 구성이 아닌 것은?", answers: [{ text: "기-승-전-결", correct: true }, { text: "1-4행(기)", correct: false }, { text: "5-8행(서)", correct: false }] },
        { question: "시상을 집약하고 마무리하는 9-10행을 무엇이라 부르는가?", answers: [{ text: "낙구", correct: true }, { text: "여음구", correct: false }, { text: "후렴구", correct: false }] },
        { question: "낙구의 시작을 알리는 감탄사는 무엇인가?", answers: [{ text: "아아", correct: true }, { text: "어와", correct: false }, { text: "아으", correct: false }] },
        { question: "작가 월명사의 신분은 무엇이었는가?", answers: [{ text: "승려", correct: true }, { text: "화랑", correct: false }, { text: "귀족", correct: false }] },
        { question: "<제망매가>는 어느 책에 실려 전해지는가?", answers: [{ text: "삼국유사", correct: true }, { text: "삼국사기", correct: false }, { text: "고려사", correct: false }] },
        { question: "누이의 죽음을 '떨어질 잎처럼'에 빗댄 표현 방식은?", answers: [{ text: "직유법", correct: true }, { text: "은유법", correct: false }, { text: "의인법", correct: false }] },
        { question: "작품의 마지막 부분에 드러나는 화자의 태도는?", answers: [{ text: "종교적 승화", correct: true }, { text: "현실 도피", correct: false }, { text: "절망", correct: false }] },
        { question: "'제망매가'의 '망매(亡妹)'는 무슨 뜻인가?", answers: [{ text: "죽은 누이", correct: true }, { text: "사라진 매화", correct: false }, { text: "잃어버린 동생", correct: false }] }
    ];

    // --- 게임 상태 변수 ---
    let score;
    let currentQuestionIndex;
    let gameState; // 'start', 'playing', 'feedback', 'gameOver'
    let feedback = { type: '', timer: 0 };
    let keys = {};
    let penguin;
    let signs;
    let signSpeed;

    // --- 게임 객체 ---
    const penguinSVG = new Image();
    penguinSVG.src = "data:image/svg+xml," + encodeURIComponent(`
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
            <g transform="translate(0, 10)">
                <path fill="#333" d="M100,20 C60,20 30,50 30,90 C30,130 60,180 100,180 C140,180 170,130 170,90 C170,50 140,20 100,20 Z"/>
                <path fill="#FFF" d="M100,60 C70,60 50,80 50,110 C50,140 70,160 100,160 C130,160 150,140 150,110 C150,80 130,60 100,60 Z"/>
                <circle fill="#333" cx="80" cy="95" r="8"/>
                <circle fill="#333" cx="120" cy="95" r="8"/>
                <path fill="#FFA500" d="M100,110 L90,125 L110,125 Z"/>
                <path fill="#FFA500" d="M35,145 a 15,15 0 0,0 0,10 a 25,15 0 0,0 20,-10 Z" transform="rotate(-20, 35, 145)"/>
                <path fill="#FFA500" d="M165,145 a 15,15 0 0,1 0,10 a 25,15 0 0,1 -20,-10 Z" transform="rotate(20, 165, 145)"/>
            </g>
        </svg>`);

    // --- 유틸리티 함수 ---
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function speak(text) {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'ko-KR';
        utterance.rate = 1.5;
        utterance.pitch = 1.2;
        window.speechSynthesis.speak(utterance);
    }

    // --- 게임 초기화 및 설정 ---
    function init() {
        const containerRect = gameContainer.getBoundingClientRect();
        canvas.width = containerRect.width;
        canvas.height = containerRect.height;

        gameState = 'start';
        score = 0;
        currentQuestionIndex = 0;
        shuffleArray(questions);

        penguin = {
            x: canvas.width / 2,
            y: canvas.height - 100,
            width: 50,
            height: 50,
            speed: 40,
            targetX: canvas.width / 2,
            targetY: canvas.height - 100,
        };

        signSpeed = 1;
        signs = [];
        scoreEl.innerText = score;
        startScreen.classList.remove('hidden');
        gameOverScreen.classList.add('hidden');
        document.getElementById('questionBox').classList.add('hidden');
        document.getElementById('touch-controls').classList.add('hidden');
    }

    function startGame() {
        gameState = 'playing';
        startScreen.classList.add('hidden');
        document.getElementById('questionBox').classList.remove('hidden');
        document.getElementById('touch-controls').classList.remove('hidden');
        loadQuestion();
        gameLoop();
    }

    // --- 게임 로직 ---
    function loadQuestion() {
        if (currentQuestionIndex >= questions.length) {
            gameState = 'gameOver';
            return;
        }

        const q = questions[currentQuestionIndex];
        questionTextEl.innerText = q.question;
        
        signs = [];
        const answers = [...q.answers];
        shuffleArray(answers);
        
        const laneCount = answers.length;
        const laneWidth = canvas.width / laneCount;
        answers.forEach((ans, i) => {
            signs.push({
                text: ans.text,
                correct: ans.correct,
                x: (i * laneWidth) + (laneWidth / 2),
                y: -150,
                width: Math.min(140, laneWidth - 20),
                height: 100,
            });
        });
        
        signSpeed += 0.1;
    }

    function update() {
        if (gameState !== 'playing') return;

        if (keys['ArrowLeft'] || keys['touchLeft']) penguin.targetX -= penguin.speed;
        if (keys['ArrowRight'] || keys['touchRight']) penguin.targetX += penguin.speed;
        if (keys['ArrowUp'] || keys['touchUp']) penguin.targetY -= penguin.speed;
        if (keys['ArrowDown'] || keys['touchDown']) penguin.targetY += penguin.speed;

        penguin.x += (penguin.targetX - penguin.x) * 0.2;
        penguin.y += (penguin.targetY - penguin.y) * 0.2;

        penguin.x = Math.max(penguin.width / 2, Math.min(canvas.width - penguin.width / 2, penguin.x));
        penguin.y = Math.max(penguin.height / 2, Math.min(canvas.height - penguin.height / 2, penguin.y));
        penguin.targetX = penguin.x;
        penguin.targetY = penguin.y;

        signs.forEach(sign => {
            sign.y += signSpeed;
            if (
                penguin.x < sign.x + sign.width / 2 &&
                penguin.x > sign.x - sign.width / 2 &&
                penguin.y < sign.y + sign.height / 2 &&
                penguin.y > sign.y - sign.height / 2
            ) {
                handleCollision(sign);
            }
            if (sign.y > canvas.height + sign.height) {
                 handleCollision({correct: false});
            }
        });
    }
    
    function handleCollision(sign) {
        gameState = 'feedback';
        if (sign.correct) {
            speak('천재');
            score += 5;
            scoreEl.innerText = score;
            feedback = { type: 'correct', timer: 60 };
        } else {
            speak('바보');
            feedback = { type: 'wrong', timer: 60 };
        }
    }
    
    function handleFeedback() {
        feedback.timer--;
        if (feedback.timer <= 0) {
            currentQuestionIndex++;
            if (currentQuestionIndex >= questions.length) {
                gameState = 'gameOver';
                finalScoreEl.innerText = score;
                
                const gameOverMessageEl = document.getElementById('gameOverMessage');
                if (score === 100) {
                    gameOverMessageEl.innerText = "당신은 국어황입니다";
                } else if (score >= 90) {
                    gameOverMessageEl.innerText = "당신은 국어를 잘 합니다!";
                } else if (score >= 80) {
                    gameOverMessageEl.innerText = "당신은 국어를 그럭저럭 합니다";
                } else if (score >= 70) {
                    gameOverMessageEl.innerText = "당신은 국어를 못 합니다";
                } else {
                    gameOverMessageEl.innerText = "당신은 국어를 정말 못 합니다";
                }

                gameOverScreen.classList.remove('hidden');
                document.getElementById('questionBox').classList.add('hidden');
                document.getElementById('touch-controls').classList.add('hidden');
            } else {
                loadQuestion();
                gameState = 'playing';
            }
        }
    }

    // --- 렌더링 ---
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(penguinSVG, penguin.x - penguin.width / 2, penguin.y - penguin.height / 2, penguin.width, penguin.height);

        signs.forEach(sign => {
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(sign.x - 5, sign.y - sign.height / 2, 10, sign.height);
            ctx.fillStyle = '#DEB887';
            ctx.fillRect(sign.x - sign.width / 2, sign.y - sign.height / 2, sign.width, sign.height / 2);
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 3;
            ctx.strokeRect(sign.x - sign.width / 2, sign.y - sign.height / 2, sign.width, sign.height / 2);
            
            ctx.fillStyle = '#000';
            ctx.font = '16px "Noto Sans KR"';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            const textY = sign.y - sign.height / 4;

            const words = sign.text.split(' ');
            let line = '';
            let lines = [];
            for (let n = 0; n < words.length; n++) {
                let testLine = line + words[n] + ' ';
                let metrics = ctx.measureText(testLine);
                if (metrics.width > sign.width - 10 && n > 0) {
                    lines.push(line);
                    line = words[n] + ' ';
                } else {
                    line = testLine;
                }
            }
            lines.push(line);
            const lineHeight = 18;
            let startY = textY - (lines.length - 1) * lineHeight / 2;
            lines.forEach((l, i) => ctx.fillText(l.trim(), sign.x, startY + i * lineHeight));
        });
        
        if (feedback.timer > 0) {
            ctx.save();
            let alpha = Math.min(1, feedback.timer / 30);
            ctx.font = 'bold 60px "Noto Sans KR"';
            if (feedback.type === 'correct') {
                ctx.fillStyle = `rgba(76, 175, 80, ${alpha})`;
                ctx.fillText('천재!', canvas.width / 2, canvas.height / 2);
            } else {
                ctx.fillStyle = `rgba(244, 67, 54, ${alpha})`;
                ctx.fillText('바보!', canvas.width / 2, canvas.height / 2);
            }
            ctx.restore();
        }
    }

    // --- 게임 루프 ---
    function gameLoop() {
        if (gameState === 'gameOver') return;

        if (gameState === 'playing') update();
        else if (gameState === 'feedback') handleFeedback();
        
        draw();
        requestAnimationFrame(gameLoop);
    }
    
    // --- 이벤트 리스너 ---
    window.addEventListener('keydown', e => {
        if(['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'].includes(e.key)) {
            e.preventDefault();
            keys[e.key] = true;
        }
    });
    window.addEventListener('keyup', e => { keys[e.key] = false; });

    function handleTouch(e, isDown) {
        e.preventDefault();
        const keyMap = {
            touchUp: 'touchUp', touchDown: 'touchDown',
            touchLeft: 'touchLeft', touchRight: 'touchRight'
        };
        const key = keyMap[e.currentTarget.id];
        if (key) keys[key] = isDown;
    }

    [touchUp, touchDown, touchLeft, touchRight].forEach(btn => {
        btn.addEventListener('touchstart', e => handleTouch(e, true));
        btn.addEventListener('touchend', e => handleTouch(e, false));
        btn.addEventListener('touchcancel', e => handleTouch(e, false));
    });

    startButton.addEventListener('click', startGame);
    restartButton.addEventListener('click', () => {
        init();
        startGame();
    });

    window.addEventListener('resize', init);
    
    // DOMContentLoaded 이벤트 리스너를 게임 스크립트 전용으로 변경
    document.addEventListener('DOMContentLoaded', () => {
        // 이 리스너는 게임 초기화만 담당하도록 합니다.
        // 기존 퀴즈의 초기화는 별도의 스크립트 블록에 있습니다.
        const gameCanvasEl = document.getElementById('gameCanvas');
        if (gameCanvasEl) {
            init();
        }
    });

</script>
</body>
</html>
